# Ajustos per K3s – evita hostPort i permet scheduling al control-plane
prometheus-node-exporter:
  hostNetwork: false
  hostPID: false
  # Evita el conflicte amb hostPort 9100
  hostPort: null
  containerPort: 9100
  service:
    port: 9100
    targetPort: 9100

  # Afegeix toleracions perquè es puga programar també al node de control
  tolerations:
    - key: "node-role.kubernetes.io/control-plane"
      operator: "Exists"
      effect: "NoSchedule"
    - key: "node-role.kubernetes.io/master"
      operator: "Exists"
      effect: "NoSchedule"

# (Opcional) Si ja tens un altre node-exporter extern, pots desactivar-lo:
# prometheus-node-exporter:
#   enabled: false

